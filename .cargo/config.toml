# Flags that apply to all crates and configurations
[target.'cfg(all())']
rustflags = [
    # Lints

    # Risky code
    "-Dunsafe_code",
    "-Dnon_ascii_idents",

    # Potential bugs
    #
    # Use warn instead of deny to stay in Crater builds:
    # https://www.reddit.com/r/rust/comments/f5xpib/psa_denywarnings_is_actively_harmful/

    # Rust compiler compatibility
    "-Wrust_2018_idioms",
    "-Wrust_2021_compatibility",
    "-Wfuture_incompatible",

    # Pointer casts
    "-Wclippy::cast_ptr_alignment",
    "-Wclippy::fn_to_numeric_cast_any",

    # Integer conversions
    "-Wclippy::checked_conversions",
    "-Wclippy::invalid_upcast_comparisons",
    "-Wclippy::range_minus_one",
    "-Wclippy::range_plus_one",
    "-Wclippy::cast_lossless",
    "-Wclippy::cast_possible_truncation",
    "-Wclippy::cast_possible_wrap",
    "-Wclippy::cast_precision_loss",
    "-Wclippy::cast_sign_loss",

    # Incomplete code
    "-Wclippy::todo",
    "-Wunused_crate_dependencies",
    "-Wmissing_debug_implementations",
    "-Wclippy::missing_assert_message",
    "-Wclippy::allow_attributes_without_reason",
    "-Wclippy::ignore_without_reason",

    # Manual debugging
    # Prefer tracing::trace!() or tracing::debug!()
    "-Wclippy::print_stdout",
    "-Wclippy::print_stderr",
    "-Wclippy::dbg_macro",

    # Panics
    "-Wclippy::fallible_impl_from",
    "-Wclippy::unwrap_in_result",
    "-Wclippy::missing_panics_doc",

    # Documentation
    "-Wmissing_docs",
    "-Wclippy::missing_docs_in_private_items",
    "-Wclippy::unnecessary_safety_doc",

    # Testing and debugging
    "-Wclippy::assertions_on_result_states",
    "-Wclippy::debug_assert_with_mut_call",

    # Likely bugs or future issues
    "-Wclippy::large_stack_arrays",
    "-Wclippy::large_stack_frames",
    "-Wclippy::large_futures",
    "-Wclippy::large_include_file",
    "-Wclippy::large_enum_variant",

    # Style
    "-Wclippy::from_iter_instead_of_collect",
    "-Wclippy::inconsistent_struct_constructor",
    "-Wclippy::manual_assert",
    "-Wclippy::needless_pass_by_value",
    "-Wclippy::precedence_bits",
    "-Wclippy::let_underscore_untyped",
    "-Wclippy::option_option",
    "-Wclippy::ref_option",
    "-Wclippy::ref_option_ref",
    "-Wclippy::trivially_copy_pass_by_ref",
    "-Wclippy::unnecessary_wraps",
]
